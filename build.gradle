apply from: './version.gradle'

buildscript {
	repositories {
		mavenLocal()
		maven { url "https://maven.aliyun.com/repository/gradle-plugin" }
		mavenCentral()
		gradlePluginPortal()
	}
	dependencies {
		classpath "org.springframework.boot:spring-boot-gradle-plugin:${springboot}"
	}
}


allprojects {
	apply plugin: 'java'
	apply plugin: 'idea'
	apply plugin: "org.springframework.boot"
	group = "$projectGroup"
	version = "$projectVersion"
	sourceCompatibility = '1.8'
	targetCompatibility = '1.8'

	repositories {
		mavenLocal()
		maven { url 'https://maven.aliyun.com/nexus/content/groups/public/' }
		mavenCentral()
		gradlePluginPortal()
	}

	tasks.withType(JavaCompile) {
		//enable compilation in a separate daemon process
		options.fork = true
		options.encoding = 'UTF-8'
	}
}

subprojects {
	dependencies {
		implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: "$rootProject.ext.version.springboot"
		implementation "org.springframework.boot:spring-boot-starter-aop:$rootProject.ext.version.springboot"
		testImplementation "org.springframework.boot:spring-boot-starter-test:$rootProject.ext.version.springboot"
		implementation "org.springframework.boot:spring-boot-devtools:$rootProject.ext.version.springboot"
		implementation "com.google.guava:guava:$rootProject.ext.version.guava"
		implementation "org.apache.curator:curator-recipes:$rootProject.ext.version.curator"
		implementation "org.apache.curator:curator-framework:$rootProject.ext.version.curator"
		implementation "org.apache.curator:curator-client:$rootProject.ext.version.curator"


	}

	test {
		useJUnitPlatform()
	}
}
